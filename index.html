<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>REVINGO ãƒ¼ Reversi Ã— Bingo ãƒ¼</title>
  <style>
    :root{color-scheme:dark;}
    html,body{height:100%;margin:0;background:#0b0f14;color:#e7eef7;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}

    /* Layout: keep header slim and ensure canvas area is always tappable (including bottom row) */
    #wrap{height:100%;display:flex;flex-direction:column;min-height:0;}

    header{flex:0 0 auto;display:flex;flex-wrap:wrap;gap:6px;align-items:center;
      padding:6px 8px calc(6px + env(safe-area-inset-top));
      border-bottom:1px solid #1b2633;background:#0c121a;
    }

    .pill{padding:6px 10px;border:1px solid #223244;border-radius:999px;background:#0f1822;line-height:1.2;}
    .mini{padding:5px 9px;font-size:13px;}
    .title{font-weight:700;letter-spacing:.2px;}

    header select, header button{
      background:#0f1822;color:#e7eef7;border:1px solid #223244;border-radius:12px;
      padding:8px 10px;cursor:pointer;font-size:13px;
    }
    header button:hover{filter:brightness(1.07)}
    header button:active{transform:translateY(1px)}
    header button:disabled{opacity:.55;cursor:not-allowed}

    /* HUD grid: compact on mobile */
    #hud{display:grid;gap:6px;grid-template-columns:repeat(2,minmax(0,1fr));flex:1 1 320px;min-width:240px;}
    #hud .pill{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

    .controls{display:flex;gap:6px;flex-wrap:wrap;align-items:center;}
    .controls .pill{display:flex;gap:8px;align-items:center;}

    /* Main canvas region */
    #main{flex:1 1 auto;min-height:0;display:flex;flex-direction:column;}
    #canvasWrap{flex:1 1 auto;min-height:0;position:relative;}
    #canvas{display:block;width:100%;height:100%;touch-action:none;}

    /* Bottom bar (rule button) â€“ does NOT overlay the board area */
    #bottomBar{flex:0 0 auto;padding:8px 10px calc(10px + env(safe-area-inset-bottom));
      background:linear-gradient(to top, rgba(12,18,26,0.92), rgba(12,18,26,0.72));
      border-top:1px solid #1b2633;
      display:flex;justify-content:center;align-items:center;
    }
    #rulesBtn{min-width:min(520px,92vw);}

    /* Toast */
    #toast{position:fixed;left:50%;transform:translateX(-50%);
      bottom:calc(64px + env(safe-area-inset-bottom));
      background:rgba(14,22,32,0.92);border:1px solid rgba(120,160,210,0.25);
      padding:10px 14px;border-radius:999px;backdrop-filter:blur(6px);
      box-shadow:0 10px 30px rgba(0,0,0,0.35);
      opacity:0;pointer-events:none;transition:opacity .18s ease;
      max-width:min(640px,92vw);text-align:center;
    }
    #toast.show{opacity:1;}

    /* Overlay modal */
    #overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;
      background:rgba(0,0,0,0.55);backdrop-filter:blur(2px);padding:18px;
    }
    #overlay .card{background:#0c121a;border:1px solid #223244;border-radius:18px;
      padding:18px 16px;min-width:280px;max-width:min(520px,92vw);
      box-shadow:0 12px 30px rgba(0,0,0,0.45)
    }
    #overlay h2{margin:0 0 8px 0;font-size:18px}
    #overlay p{margin:6px 0;color:#b9c7d8;line-height:1.5}
    #overlay .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    #overlay button{flex:1}

    /* Rules drawer */
    #rules{position:fixed;left:0;right:0;bottom:0;transform:translateY(105%);
      transition:transform .22s ease;z-index:20;
      background:rgba(12,18,26,0.96);border-top:1px solid #223244;backdrop-filter:blur(8px);
      padding:14px 14px calc(14px + env(safe-area-inset-bottom));
      max-height:min(52vh,520px);overflow:auto;
    }
    #rules.show{transform:translateY(0%);}
    #rules .head{display:flex;justify-content:space-between;gap:10px;align-items:center;margin-bottom:8px;}
    #rules .warn{color:#ffd27a}
    kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:#101a24;border:1px solid #243447;border-bottom-width:2px;border-radius:6px;padding:1px 6px;color:#d7e6ff}

    @media (max-width: 420px){
      header{padding:6px 8px calc(6px + env(safe-area-inset-top));}
      .pill{padding:5px 8px;font-size:12px;}
      header select, header button{padding:7px 9px;font-size:12px}
    }
  </style>
</head>
<body>
<div id="wrap">
  <header>
    <span class="pill mini title" id="titlePill">REVINGO</span>

    <div id="hud">
      <span class="pill mini" id="turnPill">æ‰‹ç•ª: -</span>
      <span class="pill mini" id="scorePill">å¾—ç‚¹ é»’:0 / ç™½:0</span>
      <span class="pill mini" id="diffPill">ã‚¹ã‚³ã‚¢å·®(è‡ªåˆ†-æ•µ): 0</span>
      <span class="pill mini" id="itemPill">âš¡ é»’:1 / ç™½:1</span>
      <span class="pill mini" id="reversePill">ğŸ”„ é»’:0 / ç™½:0</span>
      <span class="pill mini" id="gaugePill">é€£ç¶šãƒœãƒ¼ãƒŠã‚¹: é»’0/3 / ç™½0/3</span>
    </div>

    <div class="controls">
      <label class="pill mini" style="gap:8px;">
        å¯¾æˆ¦
        <select id="modeSel">
          <option value="cpu">äºº vs CPUï¼ˆç™½ï¼‰</option>
          <option value="pvp">äºº vs äºº</option>
        </select>
      </label>

      <label class="pill mini" style="gap:8px;">
        é›£æ˜“åº¦
        <select id="diffSel">
          <option value="easy">EASY</option>
          <option value="normal">NORMAL</option>
          <option value="hard">HARD</option>
        </select>
      </label>

      <label class="pill mini" style="gap:8px;">
        ãƒ†ãƒ¼ãƒ
        <select id="themeSel">
          <option value="neon">ãƒã‚ªãƒ³</option>
          <option value="classic">ã‚¯ãƒ©ã‚·ãƒƒã‚¯</option>
        </select>
      </label>

      <button id="lightningBtn" class="mini" title="ç¨²å¦»ï¼šåŒæ–¹åˆæ³•æ‰‹ãªã—ã®ã¨ãã ã‘ä½¿ç”¨å¯">âš¡ ç¨²å¦»</button>
      <button id="reverseBtn" class="mini" title="åè»¢ï¼šç›¸æ‰‹ã®é§’ã‚’1ã¤è‡ªåˆ†ã®è‰²ã«å¤‰ãˆã‚‹">ğŸ”„ åè»¢</button>
      <button id="resetBtn" class="mini">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
  </header>

  <div id="main">
    <div id="canvasWrap">
      <canvas id="canvas"></canvas>
    </div>

    <div id="bottomBar">
      <button id="rulesBtn" class="pill">ãƒ«ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</button>
    </div>
  </div>
</div>

<div id="toast"></div>

<div id="overlay">
  <div class="card">
    <h2 id="ovTitle">é€šçŸ¥</h2>
    <p id="ovBody"></p>
    <div class="row" id="ovRow">
      <button id="ovPrimary">OK</button>
      <button id="ovSecondary" style="display:none">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>

<div id="rules">
  <div class="head">
    <div class="pill" style="border-radius:12px;">ãƒ«ãƒ¼ãƒ«</div>
    <button id="rulesClose">é–‰ã˜ã‚‹</button>
  </div>
  <div><span class="warn">REVINGO</span>ï¼š<b>Reversi Ã— Bingo</b>ï¼ˆã‚ªã‚»ãƒ­ã®æŒŸã¿ï¼‹ãƒ“ãƒ³ã‚´ã®ãƒ©ã‚¤ãƒ³æˆç«‹ï¼‰ã€‚ç›¤é¢ã¯ <b>8Ã—8å›ºå®š</b>ã€‚</div>
  <div style="margin-top:6px;"><span class="warn">BINGO</span>ï¼š<b>æ¨ª/ç¸¦/æ–œã‚(2æœ¬)</b>ãŒ<b>å®Œå…¨ã«åŒè‰²</b>ã§æƒã†ã¨ã€ãã®ãƒ©ã‚¤ãƒ³ã®çŸ³ã‚’æ¶ˆå»ï¼ˆå¾—ç‚¹ï¼æ¶ˆã—ãŸçŸ³æ•°ï¼‰ã€‚</div>
  <div style="margin-top:6px;"><span class="warn">ãƒªãƒ¼ãƒ</span>ï¼šã‚ãªãŸï¼ˆé»’ï¼‰ã®çŸ³ãŒ<b>ã‚ã¨1ãƒã‚¹ã§BINGO</b>ã«ãªã‚‹ãƒ©ã‚¤ãƒ³ã¯ã€ç›¤é¢ä¸Šã§å…‰ã£ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
  <div style="margin-top:6px;"><span class="warn">ãƒ‘ã‚¹ãƒ«ãƒ¼ãƒ«</span>ï¼šç›¤ä¸Šã«<b>ç©ºããƒã‚¹ãŒã‚ã‚‹</b>ã®ã«æ‰‹ç•ªãŒæŒ‡ã›ã‚‹æ‰‹ãŒç„¡ã„å ´åˆã¯ <b>ç›¸æ‰‹ã®ã‚¿ãƒ¼ãƒ³</b>ï¼ˆè‡ªå‹•ãƒ‘ã‚¹ï¼‰ã€‚</div>
  <div style="margin-top:6px;"><span class="warn">çµ‚å±€</span>ï¼šåŒæ–¹ã¨ã‚‚æŒ‡ã›ã‚‹æ‰‹ãŒç„¡ã„ï¼ˆ=ä¸¡è€…ã®åˆæ³•æ‰‹ãŒ0ï¼‰çŠ¶æ…‹ã«ãªã£ãŸã‚‰<b>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</b>ã€‚ãŸã ã—ãã®ç¬é–“ã«âš¡ãŒæ®‹ã£ã¦ã„ã‚Œã°<b>ç¨²å¦»ã§ç¶šè¡Œ</b>ã§ãã¾ã™ã€‚</div>
  <div style="margin-top:6px;"><span class="warn">ç¨²å¦»</span>ï¼šæ•µã®é§’ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«<b>5å€‹</b>ç ´å£Š â†’ ç ´å£Šã—ãŸ<b>5ç®‡æ‰€ã™ã¹ã¦</b>ã«<b>è‡ªé§’ã‚’5å€‹</b>å†é…ç½®ï¼ˆ<b>æ‰‹ç•ªã¯æ¶ˆè²»ã—ãªã„ / è‡ªé§’ç ´å£Šã‚³ã‚¹ãƒˆãªã—</b> / åˆæœŸæ‰€æŒï¼šé»’1ãƒ»ç™½1ï¼‰ã€‚</div>
  <div style="margin-top:6px;"><span class="warn">åè»¢ã‚¢ã‚¤ãƒ†ãƒ ğŸ”„</span>ï¼š<b>BINGOæˆç«‹ã”ã¨ã«1å€‹</b>ï¼ˆè¤‡æ•°ãƒ©ã‚¤ãƒ³ãªã‚‰ãã®æœ¬æ•°ï¼‰ã‚’ç²å¾—ã€‚è‡ªåˆ†ã®æ‰‹ç•ªã«ä½¿ã†ã¨ã€<b>ç›¸æ‰‹ã®ç½®ã„ãŸé§’ã‚’1ã¤è‡ªåˆ†ã®è‰²ã«åè»¢</b>ã—ã€ãã®å¾Œã®æŒŸã¿è¾¼ã¿ã‚‚é€šå¸¸é€šã‚Šç™ºç”Ÿã™ã‚‹ï¼ˆä½¿ç”¨ã¯æ‰‹ç•ªã‚’æ¶ˆè²»ï¼‰ã€‚</div>
  <div style="margin-top:6px;">æ“ä½œï¼šã‚¿ãƒƒãƒ—ï¼ç€æ‰‹ / <kbd>âš¡ç¨²å¦»</kbd>ï¼ç¨²å¦»ç™ºå‹• / <kbd>ğŸ”„åè»¢</kbd>ï¼åè»¢ã‚¢ã‚¤ãƒ†ãƒ ç™ºå‹• / <kbd>ãƒªã‚»ãƒƒãƒˆ</kbd>ï¼åˆæœŸåŒ–</div>
</div>

<script type="module" src="./src/app.js"></script>
</body>
</html>
